/**
 *
 * Created by jahv on 2017/4/12.
 */
function store(storage) {
  return {
    get(name) {
      let value = storage.getItem(name);
      if (!value)return null;
      return JSON.parse(value);
    },

    append(name, value) {
      let old = storage.getItem(name) || '[]';
      old = JSON.parse(old);
      if (typeof old.length !== "number") old = [old];
      old.push(value);
      storage.setItem(name, JSON.stringify(old));
    },

    set(name, value) {
      storage.setItem(name, JSON.stringify(value));
    },

    remove(name){
      storage.removeItem(name);
    }
  }
}
const Store = {
  local: store(window.localStorage),
  session: store(window.sessionStorage)
};
export {Store}